<?xml version="1.0" encoding="utf-8"?>
<odoo>


    <template id="custom_document_tax_totals_template">
        <!-- <xpath expr="." position="replace"> -->

            <style> 
                .o_amount{font-size: 15px; } 
                .o_total_label{ font-weight: bold; font-size:15px; } 
                .o_total_words{ 
                    color: white !important; 
                    font-size: 15px; 
                    font-weight: bold;
                } 
                .o_total_words_bg { 
                    <!-- background-color: #af7d0c !important;  -->
                    background-color: #ffce5f !important; 
                    color: #000000 !important;
                    font-weight: bold;
                } 

            </style>
            <div>

                <t t-set="same_tax_base" t-value="tax_totals['same_tax_base']" />
                <t t-foreach="tax_totals['subtotals']" t-as="subtotal">
                    <tr class="o_subtotal">
                        <td t-att-colspan="custom_total_cols-2 if custom_total_cols else 1" class="mr-1">
                            <!-- <span t-out="subtotal['name']">Untaxed Amount</span> -->
                            <span class="o_total_label m-1">Total Gross Amount (SAR) <span class="lh-sm" dir="rtl">إجمالي المبلغ الإجمالي (ريال سعودي)</span></span>

                        </td>
                        <td class="text-end o_amount" colspan="2">
                            <strong class="m-1 fs-5">
                                <span t-att-class="oe_subtotal_footer_separator"
                                    t-out="subtotal['base_amount_currency']"
                                    t-options='{"widget": "float", "precision": 2}'>
                                    27.00</span>
                            </strong>
                        </td>
                    </tr>

                    <t t-foreach="subtotal['tax_groups']" t-as="tax_group">
                        <tr class="o_taxes">
                            <t
                                t-if="same_tax_base or tax_group['display_base_amount_currency'] is None">
                                <td t-att-colspan="custom_total_cols-2 if custom_total_cols else 1">
                                    <!-- <span class="text-nowrap"
                                    t-out="tax_group['group_name']">Tax
                                    15%</span> -->
                                    <span class="text-nowrap o_total_label m-1">Total VAT Amount 15% (SAR) <span class="lh-sm text-end" dir="rtl">إجمالي مبلغ ضريبة القيمة المضافة %15 (ريال سعودي)</span></span>

                                </td>
                                <td class="text-end o_price_total" colspan="2">
                                    <strong class="m-1">
                                        <span class="fs-5 text-nowrap o_amount"
                                        t-out="tax_group['tax_amount_currency']"
                                        t-options='{"widget": "float", "precision": 2}'>
                                        1.05</span>
                                    </strong>
                                </td>
                            </t>
                            <t t-else="">
                                <td t-att-colspan="custom_total_cols-2 if custom_total_cols else 1">
                                    <!-- <span t-out="tax_group['group_name']">Tax 15%</span> -->
                                    <span class="text-nowrap o_total_label m-1">Total VAT Amount 15% (SAR) <span class="lh-sm" dir="rtl">إجمالي مبلغ ضريبة القيمة المضافة %15 (ريال سعودي)</span></span>

                                    <span> on </span>
                                    <strong class="text-nowrap o_amount"
                                        t-out="tax_group['display_base_amount_currency']"
                                        t-options='{"widget": "float", "precision": 2}'
                                    >
                                        27.00</strong>
                                </td>
                                <td class="text-end o_price_total o_amount" colspan="2">
                                    <strong class="m-1">
                                        <span class="fs-5 text-nowrap"
                                            t-out="tax_group['tax_amount_currency']"
                                            t-options='{"widget": "float", "precision": 2}'>
                                        4.05</span>
                                    </strong>
                                </td>
                            </t>
                        </tr>
                    </t>
                </t>


                <tr t-if="'cash_rounding_base_amount_currency' in tax_totals">
                    <td t-att-colspan="custom_total_cols-2 if custom_total_cols else 1" >Rounding</td>
                    <td class="text-end" colspan="2">
                        <span t-out="tax_totals['cash_rounding_base_amount_currency']"
                                t-options='{"widget": "float", "precision": 2}'
                        >0</span>
                    </td>
                </tr>

                <!--Total
                amount with all taxes-->
                <tr class="o_total o_total_words_bg" t-if="o.amount_tax > 0">
                    <td t-att-colspan="custom_total_cols-2 if custom_total_cols else 1">
                        <strong class="text-nowrap o_total_label o_total_words_bg m-1">Total Gross Amount Incl. VAT (SAR) <span class="lh-sm" dir="rtl">إجمالي المبلغ الإجمالي بما في ذلك. ضريبة القيمة المضافة (ريال سعودي) </span></strong>
                    </td>
                    <td class="text-end" colspan="2">
                        <strong class="m-1">
                            <span t-out="tax_totals['total_amount_currency']"
                                class="fs-5 o_total_words_bg"
                                t-options='{"widget": "float", "precision": 2}'
                            >31.05</span>
                        </strong>
                    </td>
                </tr>

                <tr class="o_price_total o_total_words_bg" t-if="show_amount_words">
                    <td t-att-colspan="custom_total_cols if custom_total_cols else 1"
                        class="o_total_words_bg">
                        <strong class="m-1">Amount in Words : </strong>
                        <!-- </td> -->
                        <!-- <td> -->
                        <span class="px-3"
                            t-esc="currency.amount_to_text(tax_totals['total_amount_currency'])"></span>
                    </td>
                </tr>
                <tr class="o_price_total" t-if="show_amount_words">
                    <td t-att-colspan="custom_total_cols if custom_total_cols else 1"
                        class="o_total_words_bg lh-sm text-end" 
                        dir="rtl" 
                        style="font-family: Arial, 'Noto Naskh Arabic', sans-serif; text-align: right;">
                        <strong class="m-1">المبلغ الإجمالي :</strong>
                        <span class="px-3" 
                            t-out="o.with_context({'lang':'ar_001'}).currency_id.amount_to_text(tax_totals['total_amount_currency'])">
                        </span>
                    </td>
                </tr>


            </div>
        <!-- </xpath> -->
        <!--
            Generic template to display tax totals in pdf reports.
            Used by invoices, SO and PO.

            ARGUMENTS:
            - currency: The res.currency to use.
            - tax_totals: dict in the form generated by account.move's _get_tax_totals.
            - custom_total_cols: (Number) For filling up empty columns in invoice report
            - show_amount_words: (Boolean) To show/hide amount in words
        -->


    </template>


    <!-- INVOICE -->
    <template id="custom_pdf_reports.report_invoice_document_inherit"
        inherit_id="account.report_invoice_document">
        <xpath expr="//t[@t-call='web.external_layout']" position="replace">
            <t t-set="company" t-value="o.company_id" />
            <!-- <t t-set="header_with_qr"> -->
                <t t-set="zatca_qr">
                    <div class="col-4"
                        style="position: absolute; top: 25px; bottom: 0, left: 500px; right: -100px">
                        <div class="d-flex">
                            <div class="qrcode me-3" id="qrcode_image">
                                <p class="position-relative mb-0">
                                    <!-- <t t-raw="o.generate_zatca_qr_code(invoice_data)"
                                        t-field="o.qr_code_base64"/> -->
                                    <img t-if="o.l10n_sa_qr_code_str"
                                        style="display:block;"
                                        t-att-src="'/report/barcode/?barcode_type=%s&amp;value=%s&amp;width=%s&amp;height=%s'%('QR', quote_plus(o.l10n_sa_qr_code_str), 175, 175)" />
                                    <!-- <t t-raw="" -->
                                    <!-- <img src="'data:image/png;base64,'+ o.qr_code_base64"/> -->
                                    <!-- <img src="/account/static/src/img/Odoo_logo_O.svg"
                                        id="qrcode_odoo_logo" class="top-50 start-50
                                        position-absolute bg-white border border-white border-3
                                        rounded-circle"/> -->
                                </p>
                            </div>
                        </div>
                    </div>
                </t>
            <!-- </t> -->
            <t t-call="custom_pdf_reports.custom_report_external_layout">
                <!-- <t t-call="web.external_layout_standard"> -->
                <t t-set="o" t-value="o.with_context(lang=lang)" />
                <t t-set="forced_vat" t-value="o.fiscal_position_id.foreign_vat" />

                <div class="row mb-4">
                    <div class="col-12">
                        <div class="row justify-content-start">
                            <!-- <img class=""
                                t-att-src="image_data_uri(o.company_id.header_img)"
                                style="min-height: 100px; width: 930px;" /> -->
                        </div>
                        <div class="text-center text-theme col mt-5">
                            <h2 style="color: #af7d0c;">
                                <b>TAX INVOICE</b>
                            </h2>
                        </div>
                    </div>

                </div>

                <!-- <div t-out="header_with_qr" /> -->
                <div class="clearfix invoice_main m-2">
                    <!-- <xpath expr="//div[hasclass('page')]" position="replace"> -->
                    <div class="page">
                        <style>
                            .text-theme{
                                color: #FFCE5F !important;
                            }

                            .custom_table th, .custom_table td{
                                font-size: 15px;
                            }

                            .o_total{
                                background-color: #FFCE5F !important
                            }

                            .o_header_name {
                                font-size: 26px;
                            }

                            .company_details {
                                font-size: 18px;
                            }

                            .table_head{
                                background-color: #ffc134 !important;
                                display: table-row-group;
                            }

                            .table-bordered {
                                border-collapse: collapse;
                                width: 100%; /* Optional: Makes the table span the full width of its
                                container */
                            }

                            .table-bordered th,
                            .table-bordered td {
                                border: 1px solid #000; /* Black border */
                                padding: 8px; /* Adds padding for better readability */
                                text-align: left; /* Aligns content to the left */
                            }

                            .table-bordered th {
                                background-color: #ffce5f; /* Light gray background for headers */
                            }

                        </style>

                        <!-- Seller and Buyer Details -->
                        <div class="row">
                            <!-- Seller Details -->
                            <div class="col">
                                <h5>
                                    <strong>Seller Details</strong>
                                </h5>
                                <p class="company_details">
                                    <strong style="font-size:24px;">
                                        <span t-esc="o.company_id.name" />
                                    </strong>
                                    <t t-if="o.company_id.name"><br /></t>
                                    <span t-if="o.company_id.street">
                                        <span t-esc="o.company_id.street" />
                                        <br />
                                    </span>
                                    <span t-if="o.company_id.street2">
                                        <span t-esc="o.company_id.street2" />
                                        <br />
                                    </span>
                                    <span t-if="o.company_id.state_id">
                                        <span t-esc="o.company_id.state_id.name" />
                                        <t t-if="o.company_id.country_id or o.company_id.zip"><br /></t>
                                    </span>
                                    <span t-if="o.company_id.country_id">
                                        <span t-esc="o.company_id.country_id.name+' - '" />
                                    </span>
                                    <span t-if="o.company_id.zip">
                                        <span t-esc="o.company_id.zip" />
                                        <br />
                                    </span>
                                    <span t-if="o.company_id.vat">
                                        <span t-esc="'VAT Number: '+o.company_id.vat" />
                                        <br/>
                                    </span>
                                    <span t-if="o.company_id.company_registry">
                                        <span t-esc="'CR. No: '+o.company_id.company_registry" />
                                    </span>
                                </p>
                            </div>

                            <!-- Buyer Details -->
                            <div class="col">
                                <h5>
                                    <strong>Buyer Details</strong>
                                </h5>
                                <p class="company_details">
                                    <strong style="font-size:24px;">
                                        <span t-esc="o.partner_id.name" />
                                    </strong>
                                    <t t-if="o.partner_id.name"><br /></t>
                                    <span t-if="o.partner_id.street">
                                        <span t-esc="o.partner_id.street" />
                                        <br />
                                    </span>
                                    <span t-if="o.partner_id.street2">
                                        <span t-esc="o.partner_id.street2" />
                                        <br />
                                    </span>
                                    <span t-if="o.partner_id.state_id">
                                        <span t-esc="o.partner_id.state_id.name" />
                                        <t t-if="o.partner_id.country_id or o.partner_id.zip"><br /></t>
                                    </span>
                                    <span t-if="o.partner_id.country_id">
                                        <span t-esc="o.partner_id.country_id.name+' - '" />
                                    </span>
                                    <span t-if="o.partner_id.zip">
                                        <span t-esc="o.partner_id.zip" />
                                        <br />
                                    </span>
                                    <span t-if="o.partner_id.vat">
                                        <span t-esc="'VAT Number: '+o.partner_id.vat" />
                                        <br/>
                                    </span>
                                    <span t-if="o.partner_id.company_registry">
                                        <span t-esc="'CR. No: '+o.partner_id.company_registry" />
                                    </span>
                                </p>
                            </div>
                        </div>


                        <t t-set="layout_document_title">
                            <span class="o_header_name">
                                <!-- <span t-if="not proforma" />
                                <span t-else="">PROFORMA</span> -->
                                <span t-if="o.move_type == 'out_invoice' and o.state == 'posted'">Invoice
                                    No: </span>
                                <span t-elif="o.move_type == 'out_invoice' and o.state == 'draft'">Draft
                                    Invoice</span>
                                <span t-elif="o.move_type == 'out_invoice' and o.state == 'cancel'">Cancelled
                                    Invoice</span>
                                <span t-elif="o.move_type == 'out_refund' and o.state == 'posted'">Credit
                                    Note</span>
                                <span t-elif="o.move_type == 'out_refund' and o.state == 'draft'">Draft
                                    Credit
                                    Note</span>
                                <span t-elif="o.move_type == 'out_refund' and o.state == 'cancel'">Cancelled
                                    Credit Note</span>
                                <span t-elif="o.move_type == 'in_refund'">Vendor Credit Note</span>
                                <span t-elif="o.move_type == 'in_invoice'">Vendor Bill</span>
                                <span t-if="o.name != '/'" t-field="o.name"></span>
                            </span>
                        </t>
                        <h3 class="text-theme mt-2">
                            <strong>
                                <t t-esc="layout_document_title" />
                            </strong>
                        </h3>
                        <div class="oe_structure" />

                        <div class="row">
                            <div class="col">
                                <table class="table table-bordered custom_table">
                                    <thead class="">
                                        <tr>
                                            <th>
                                                <strong class="m-1">
                                                    Invoice Date<br/>
                                                    <span class="m-1">(تاريخ الفاتورة)</span>
                                                </strong>
                                            </th>
                                            <th>
                                                <strong>
                                                    Delivery Date<br/>
                                                    (تاريخ التسليم)
                                                </strong>
                                            </th>
                                            <th>
                                                <strong>
                                                    Delivery Note No.<br/>
                                                    رقم مذكرة التسليم
                                                </strong>
                                            </th>
                                            <th>
                                                <strong>
                                                    Contract/PO No<br/>
                                                    (رقم أمر الشراء)
                                                </strong>
                                            </th>
                                            <th>
                                                <strong>
                                                    Due Date<br/>
                                                    (تاريخ االستحقاق)
                                                </strong>
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>
                                                <strong class="m-1">
                                                    <span t-field="o.invoice_date" options='{"widget": "date","format": "dd-MM-yyyy"}'/>
                                                </strong>
                                            </td>
                                            <td>
                                                <strong>
                                                    <span t-field="o.delivery_date" options='{"widget": "date","format": "dd-MM-yyyy"}' />
                                                </strong>
                                            </td>
                                            <td>
                                                <strong>
                                                    <span t-esc="o.get_delivery_note_names()"/>
                                                </strong>
                                            </td>
                                            <td>
                                                <strong>
                                                    <span t-esc="o.ref" class="text-nowrap"/>
                                                </strong>
                                            </td>
                                            <td>
                                                <strong>
                                                    <span t-field="o.invoice_date_due" options='{"widget": "date","format": "dd-MM-yyyy"}'/>
                                                </strong>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <t t-set="display_discount"
                            t-value="any(l.discount for l in o.invoice_line_ids)" />
                        <div class="oe_structure" />
                        <div class="mt-2" style="padding-top:1px;">
                            <div class="row">
                                <div class="col">
                                    <table
                                        class="o_has_total_table table o_main_table table-bordered custom_table mt-2"
                                        name="invoice_line_table">
                                        <thead class="table_head">
                                            <tr>
                                                <th name="th_index" class="text-center">
                                                    <span class="m-1">#</span>
                                                </th>
                                                <th name="th_description" class="text-start">
                                                    <span>DESCRIPTION<br />(منتج)</span>
                                                </th>
                                                <th name="th_quantity" class="text-end">
                                                    <span>QTY<br/>(كمية)</span>
                                                </th>
                                                <th name="th_unit" class="text-end">
                                                    <span>UNIT<br/>(وحدة)</span>
                                                </th>
                                                <th name="th_priceunit"
                                                    t-attf-class="text-center text-nowrap {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                                                    <span class="text-nowrap">Unit Price<br/>(SAR)<br />(سعر الوحدة)</span>
                                                </th>
                                                <th name="th_discount" t-if="display_discount"
                                                    t-attf-class="text-end {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                                                    <span>Disc.%</span>
                                                </th>
                                                <!-- <th name="th_taxes"
                                            t-attf-class="text-end {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                                            <span>Taxes</span>
                                        </th> -->
                                                <th name="th_net_total" class="text-center">
                                                    <span class="text-nowrap">Gross Total<br/>Amount<br/>(SAR)<br />(كمية)</span>
                                                </th>
                                                <th name="th_vat" class="text-center">
                                                    <span class="text-nowrap">VAT 15%<br/>(SAR)<br />( الضريبة نسبة)</span>
                                                </th>
                                                <th name="th_subtotal" class="text-center">
                                                    <span class="m-1 text-nowrap">Total<br/>Amount Incl.<br/> VAT (SAR)</span>
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody class="invoice_tbody">
                                            <t t-set="current_subtotal" t-value="0" />
                                            <t t-set="current_total" t-value="0" />
                                            <t t-set="index" t-value="1" />
                                            <t t-set="lines"
                                                t-value="o.invoice_line_ids.sorted(key=lambda l: (-l.sequence, l.date, l.move_name, -l.id), reverse=True)" />

                                            <t t-foreach="lines" t-as="line">
                                                <t t-set="current_subtotal"
                                                    t-value="current_subtotal + line.price_subtotal" />
                                                <t t-set="current_total"
                                                    t-value="current_total + line.price_total" />

                                                <tr
                                                    t-att-class="'fw-bold o_line_section' if line.display_type == 'line_section' else 'fst-italic o_line_note' if line.display_type == 'line_note' else ''">
                                                    <t t-if="line.display_type == 'product'"
                                                        name="account_invoice_line_accountable">
                                                        <td class="text-center">
                                                            <span class="m-1" t-esc="index" />
                                                        </td>
                                                        <td name="account_invoice_line_name">
                                                            <span t-if="line.name" t-field="line.name"
                                                                t-options="{'widget': 'text'}">Bacon Burger</span>
                                                        </td>
                                                        <td name="td_quantity" class="text-end text-nowrap">
                                                            <span t-if="line.quantity" t-field="line.quantity" t-options="{'widget': 'integer'}">3.00</span>
                                                        </td>
                                                        <td name="td_uom" class="text-end text-nowrap">
                                                            <span t-field="line.product_uom_id"
                                                                groups="uom.group_uom">
                                                                units</span>                                            
                                                        </td>
                                                        <td name="td_price_unit"
                                                            t-attf-class="text-end {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                                                            <span class="text-nowrap" t-esc="'{0:,.2f}'.format(line.price_unit)">
                                                                9.00</span>
                                                        </td>
                                                        <td name="td_discount" t-if="display_discount"
                                                            t-attf-class="text-end {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                                                            <span class="text-nowrap" t-field="line.discount">0</span>
                                                        </td>
                                                        <!-- <t t-set="taxes"
                                                    t-value="', '.join([(tax.invoice_label or tax.name) for tax in line.tax_ids])" /> -->

                                                        <!-- <td name="td_taxes"
                                                    t-attf-class="text-end {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }} {{
                                                'text-nowrap' if len(taxes) &lt; 10 else '' }}">
                                                    <span t-out="taxes" id="line_tax_ids">Tax 15%</span>
                                                </td> -->

                                                        <td name="td_subtotal" class="text-end o_price_total">
                                                            <span class="text-nowrap"
                                                                t-esc="'{0:,.2f}'.format(line.price_subtotal)">
                                                                27.00</span>
                                                        </td>
                                                        <td name="td_vat" class="text-end">
                                                            <span class="text-nowrap"
                                                                t-esc="'{0:,.2f}'.format(line.line_tax_amount)">
                                                                27.00</span>
                                                        </td>
                                                        <td name="td_total_amount" class="text-end">
                                                            <span class="text-nowrap m-1"
                                                                t-esc="'{0:,.2f}'.format(line.price_total)">
                                                                27.00</span>
                                                        </td>

                                                        <t t-set="index" t-value="index+1" />
                                                    </t>
                                                    <t t-elif="line.display_type == 'line_section'">
                                                        <td colspan="99">
                                                            <span t-field="line.name"
                                                                t-options="{'widget': 'text'}">A
                                                                section title</span>
                                                        </td>
                                                        <t t-set="current_section" t-value="line" />
                                                        <t t-set="current_subtotal" t-value="0" />
                                                    </t>
                                                    <t t-elif="line.display_type == 'line_note'">
                                                        <td colspan="99">
                                                            <span t-field="line.name"
                                                                t-options="{'widget': 'text'}">A
                                                                note, whose content usually applies to the
                                                                section or
                                                                product above.</span>
                                                        </td>
                                                    </t>
                                                </tr>

                                                <t
                                                    t-if="current_section and (line_last or lines[line_index+1].display_type == 'line_section')">
                                                    <tr class="is-subtotal text-end">
                                                        <td colspan="99">
                                                            <strong class="mr16">Subtotal</strong>
                                                            <span t-out="current_subtotal"
                                                                t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}">
                                                                31.05</span>
                                                        </td>
                                                    </tr>
                                                </t>
                                            </t>
                                                    <t t-if="o.tax_totals"
                                                        t-call="custom_pdf_reports.custom_document_tax_totals_template">
                                                        <t t-set="tax_totals" t-value="o.tax_totals" />
                                                        <t t-set="currency" t-value="o.currency_id" />
                                                        <t t-set="custom_total_cols" t-value="8" />
                                                        <t t-set="show_amount_words" t-value="True" />
                                                    </t>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div>
                            <div id="right-elements"
                                t-attf-class="#{'col-12' if report_type != 'html' else 'col-12'}  ">
                                <div id="total" class="clearfix row d-none">
                                    <div class="ms-auto">
                                        <table
                                            class="o_total_table table table-bordered">

                                            <!-- Tax totals summary (invoice currency) -->
                                            <t t-if="o.tax_totals"
                                                t-call="custom_pdf_reports.custom_document_tax_totals_template">
                                                <t t-set="tax_totals" t-value="o.tax_totals" />
                                                <t t-set="currency" t-value="o.currency_id" />
                                                <t t-set="custom_total_cols" t-value="8" />
                                                <t t-set="show_amount_words" t-value="True" />
                                            </t>

                                            <!--Payments-->
                                            <t t-if="print_with_payments">
                                                <t t-if="o.payment_state != 'invoicing_legacy'">
                                                    <t t-set="payments_vals"
                                                        t-value="o.sudo().invoice_payments_widget and o.sudo().invoice_payments_widget['content'] or []" />
                                                    <t t-foreach="payments_vals" t-as="payment_vals">
                                                        <tr t-if="payment_vals['is_exchange'] == 0">
                                                            <td>
                                                                <i
                                                                    class="oe_form_field text-end oe_payment_label">Paid
                                                                    on <t
                                                                        t-out="payment_vals['date']"
                                                                        t-options="{&quot;widget&quot;: &quot;date&quot;}">
                                                                    2021-09-19</t></i>
                                                            </td>
                                                            <td class="text-end">
                                                                <span t-out="payment_vals['amount']"
                                                                    t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}">
                                                                    20.00</span>
                                                            </td>
                                                        </tr>
                                                    </t>
                                                    <t t-if="len(payments_vals) &gt; 0">
                                                        <tr class="fw-bold">
                                                            <td>Amount Due</td>
                                                            <td class="text-end">
                                                                <span t-field="o.amount_residual">
                                                                    11.05</span>
                                                            </td>
                                                        </tr>
                                                    </t>
                                                </t>
                                            </t>
                                        </table>
                                    </div>
                                </div>
                                <div class="mb-2">
                                    <p class="text-end lh-sm"
                                        t-if="o.company_id.display_invoice_amount_total_words">
                                        Total amount in words: <br />
                                        <small class="text-muted lh-sm">
                                            <span t-field="o.amount_total_words">Thirty one dollar
                                        and Five
                                                cents</span>
                                        </small>
                                    </p>
                                </div>

                                <!-- Tax totals summary (company currency) -->
                                <t t-if="o.tax_totals.get('display_in_company_currency')">
                                    <t t-set="tax_totals" t-value="o.tax_totals" />
                                    <t
                                        t-call="account.document_tax_totals_company_currency_template" />
                                </t>
                                <t t-else="">
                                    <div class="oe_structure" />
                                </t>
                            </div>

                            <div id="payment_term" class="clearfix">
                                <div class="justify-text">
                                    <p t-if="not is_html_empty(o.fiscal_position_id.note)"
                                        name="note"
                                        class="mb-2">
                                        <span t-field="o.fiscal_position_id.note" />
                                    </p>
                                </div>
                                <div class="justify-text">
                                    <p t-if="not is_html_empty(o.taxes_legal_notes)"
                                        name="taxes_legal_notes" class="mb-2">
                                        <span t-field="o.taxes_legal_notes" />
                                    </p>
                                </div>
                                <t t-set="payment_term_details" t-value="o.payment_term_details" />
                                <div class="mb-3">
                                    <span id="payment_terms_note_id"
                                        t-if="o.invoice_payment_term_id.note"
                                        t-field="o.invoice_payment_term_id.note" name="payment_term">Payment
                                        within 30 calendar day</span>
                                    <br />
                                    <t
                                        t-if="o.invoice_payment_term_id.display_on_invoice and payment_term_details">
                                        <div t-if="o.show_payment_term_details"
                                            id="total_payment_term_details_table" class="row">
                                            <div
                                                t-attf-class="#{'col-10' if report_type != 'html' else 'col-sm-10 col-md-9'}">
                                                <t
                                                    t-if="o._is_eligible_for_early_payment_discount(o.currency_id,o.invoice_date)">
                                                    <td>
                                                        <span
                                                            t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"
                                                            t-out="o.invoice_payment_term_id._get_amount_due_after_discount(o.amount_total, o.amount_tax)">
                                                        30.00</span> due if paid before <span
                                                            t-out="o.invoice_payment_term_id._get_last_discount_date_formatted(o.invoice_date)">
                                                        2024-01-01</span>
                                                    </td>
                                                </t>
                                                <t t-if="len(payment_term_details) &gt; 1"
                                                    t-foreach="payment_term_details" t-as="term">
                                                    <div>
                                                        <span t-out="term_index + 1">1</span> -
                                                        Installment of <t
                                                            t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"
                                                            t-out="term.get('amount')"
                                                            class="text-end">
                                                            31.05</t>
                                                        <span> due on </span>
                                                        <t
                                                            t-out="term.get('date')"
                                                            class="text-start">
                                                            2024-01-01</t>
                                                    </div>
                                                </t>
                                            </div>
                                        </div>
                                    </t>
                                </div>
                                <!-- <div class="mb-3"
                            t-if="o.move_type in ('out_invoice', 'in_refund') and o.payment_reference">
                            <p name="payment_communication"> Payment Communication: <span
                                    class="fw-bold" t-field="o.payment_reference">INV/2023/00001</span>
                                        <t
                                    t-if="o.partner_bank_id">
                                    <br /> on this account: <span t-field="o.partner_bank_id"
                                        class="fw-bold" />
                                </t>
                            </p>
                        </div> -->
                                <!--terms
                        and conditions-->
                                <div class="text-muted mb-3"
                                    t-attf-style="#{'text-align:justify;text-justify:inter-word;' if o.company_id.terms_type != 'html' else ''}"
                                    t-if="not is_html_empty(o.narration)" name="comment">
                                    <span t-field="o.narration" />
                                </div>
                            </div>


                            <div class="row mb-3"
                                style="page-break-inside: avoid; page-break-before: auto;">
                                <div class="col-6">
                                    <table class="table table-bordered custom_table"
                                        style="border: 2px solid #000; table-layout: auto; width: 100%;">
                                        <thead>
                                            <tr>
                                                <th colspan="2" style="border: 2px solid #000;">
                                                    <span class="m-1">
                                                        <strong>BANK DETAILS / تفاصيل البنك</strong>
                                                    </span>
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td style="border: 2px solid #000; width: 50%;">
                                                    <span class="m-1">
                                                        <strong>ACCOUNT NAME / إسم الحساب</strong>
                                                    </span>
                                                </td>
                                                <td
                                                    style="border: 2px solid #000; width: 50%; word-wrap: break-word;">
                                                    <strong>MK GENERAL CONTRACTING EST</strong>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="border: 2px solid #000;">
                                                    <span class="m-1">
                                                        <strong>BANK / بنك</strong>
                                                    </span>
                                                </td>
                                                <td style="border: 2px solid #000;">
                                                    <strong>SNB</strong>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="border: 2px solid #000;">
                                                    <span class="m-1">
                                                        <strong>ACCOUNT / حساب</strong>
                                                    </span>
                                                </td>
                                                <td style="border: 2px solid #000;">
                                                    <strong>01400019050104</strong>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="border: 2px solid #000;">
                                                    <span class="m-1">
                                                        <strong>IBAN / آيبان</strong>
                                                    </span>
                                                </td>
                                                <td style="border: 2px solid #000;">
                                                    <strong>SA6010000001400019050104</strong>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="border: 2px solid #000;">
                                                    <span class="m-1">
                                                        <strong>BRANCH</strong>
                                                    </span>
                                                </td>
                                                <td style="border: 2px solid #000;">
                                                    <strong>Zuhair A, Al Hajjaj</strong>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="col-6 d-flex align-items-center justify-content-center">
                                    <img t-if="o.company_id.company_seal_img" style="height: 160px;"
                                        t-att-src="image_data_uri(o.company_id.company_seal_img)"
                                        class="img-fluid"
                                        alt="Logo" />
                                </div>
                            </div>
                        </div>
    
                        <!-- Signature Fields -->
                        <t t-set="signature_fields">
                            <div class="row mt-2" style="padding-top:30px;" t-if="o.company_id.approve_sign_img">
                                <div class="col-1"/>
                                <div class="col">
                                    <!-- <img t-att-src="image_data_uri(o.company_id.approve_sign_img)" alt="Signature" style="max-width: 120px;" /> -->
                                </div>
                                <div class="col text-center">
                                    <img t-att-src="image_data_uri(o.company_id.approve_sign_img)" alt="Signature" style="max-width: 120px; display: block; margin: 0 auto;" />
                                </div>
                                <div class="col"/>
                            </div>
                            <div class="row">
                                <div class="col-1"></div>
                                <div class="col">
                                    <span>
                                        <b>Prepared By:</b>
                                    </span>
                                </div>
                                <div class="col text-center">
                                    <!-- Signature Image -->
                                    <span>
                                        <b>Approved By:</b>
                                    </span>
                                </div>
                                <div class="col px-5">
                                    <span>
                                        <b>Received By:</b>
                                    </span>
                                </div>
                            </div>
                        </t>
                    </div>
                </div>
            </t>
        </xpath>
    </template>

    <template id="report_invoice_inherit" inherit_id="account.report_invoice">
        <xpath expr="//t[@t-call='account.report_invoice_document']" position="after">
            <t
                t-elif="o._get_name_invoice_report() == 'custom_pdf_reports.report_invoice_document_inherit'"
                t-call="custom_pdf_reports.report_invoice_document_inherit" t-lang="lang" />
        </xpath>
    </template>

</odoo>